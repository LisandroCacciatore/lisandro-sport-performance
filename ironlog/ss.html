<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starting Strength - IronLog Interactive | Lisandro Cacciatore</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=IBM+Plex+Sans:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
    <style>
        .week-card { transition: all 0.3s ease; cursor: pointer; }
        .week-card:hover { transform: translateY(-4px); }
        .week-active { box-shadow: 0 0 0 3px #1E3A8A; transform: scale(1.02); outline: none; }
        .sim-tab-active { background: #1E3A8A !important; color: #fff !important; border-color: #1E3A8A !important; }
    </style>
</head>
<body class="bg-canvas text-body font-sans antialiased">

    <nav class="sticky top-0 z-50 bg-canvas/95 backdrop-blur-sm border-b border-border">
        <div class="max-w-7xl mx-auto px-6 h-16 flex justify-between items-center">
            <a href="../index.html" class="text-xs font-mono text-muted hover:text-ink transition-colors hidden md:block">‚Üê Lisandro Cacciatore</a>
            <span class="text-border hidden md:block">|</span>
            <div class="flex items-center gap-2">
                <span class="text-xl">üßÆ</span>
                <a href="demo.html" class="font-heading font-extrabold text-lg text-ink">IronLog <span class="font-sans font-normal text-muted text-sm">/ Simuladores</span></a>
            </div>
            <div class="flex items-center gap-6">
                <a href="tools.html" class="text-sm font-sans text-muted hover:text-ink transition-colors hidden md:block">Herramientas</a>
                <a href="index.html#early-access" class="bg-primary hover:bg-primary-600 text-white px-4 py-2 rounded font-medium text-sm transition-colors">Lista de espera</a>
            </div>
        </div>
    </nav>

    <!-- ‚îÄ‚îÄ NAVEGACI√ìN CRUZADA ‚îÄ‚îÄ -->
    <div class="bg-surface border-b border-border">
        <div class="max-w-5xl mx-auto px-6 py-3 flex items-center gap-2 flex-wrap">
            <span class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mr-2">Simuladores:</span>
            <a href="wendler.html" class="text-[11px] font-mono font-bold px-3 py-1.5 rounded border border-border text-muted hover:text-ink hover:border-primary transition-all">üìà Wendler 5/3/1</a>
            <a href="cube.html"    class="text-[11px] font-mono font-bold px-3 py-1.5 rounded border border-border text-muted hover:text-ink hover:border-primary transition-all">üßä The Cube</a>
            <a href="ss.html"      class="sim-tab-active text-[11px] font-mono font-bold px-3 py-1.5 rounded border">üöÇ Starting Strength</a>
            <span class="text-border mx-1 hidden sm:block">|</span>
            <a href="../contacto.html" class="text-[11px] font-mono text-muted hover:text-primary transition-colors hidden sm:block">¬øNo sab√©s cu√°l usar? ‚Üí</a>
        </div>
    </div>

    <div class="max-w-5xl mx-auto px-6 py-12 pb-24">

        <header class="mb-12">
            <div class="flex items-center gap-3 mb-4">
                <span class="text-4xl">üöÇ</span>
                <h1 class="font-heading text-3xl md:text-5xl font-bold text-ink tracking-tight">Starting Strength</h1>
            </div>
            <div class="bg-surface p-6 md:p-8 rounded border border-border shadow-structural">
                <h2 class="font-heading text-lg font-bold text-ink mb-3">Variable Cr√≠tica: Frecuencia y progresi√≥n sesi√≥n a sesi√≥n</h2>
                <div class="text-body text-sm space-y-4 leading-relaxed">
                    <p>Starting Strength asume una cosa: el novicio puede mejorar en cada sesi√≥n. La Variable Cr√≠tica no es el volumen, ni la intensidad relativa. Es <strong>si el peso de la barra subi√≥ respecto a la sesi√≥n anterior</strong>. Cuando esa variable deja de moverse, el sistema perdi√≥ su argumento central.</p>
                    <p class="text-muted">Este simulador no reemplaza el criterio. Muestra los n√∫meros que deber√≠as estar mirando. Si no ten√©s claro cu√°ndo la progresi√≥n lineal dej√≥ de funcionar, la herramienta no alcanza.</p>
                </div>
            </div>
        </header>

        <!-- PASO 1: Esquema -->
        <section class="mb-10">
            <div class="flex items-center gap-2 mb-6">
                <span class="bg-ink text-surface text-xs font-mono font-bold px-2 py-1 rounded">PASO 1</span>
                <h3 class="font-heading font-bold text-ink">Selecciona el Esquema Semanal</h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="weekSelector">
                <div role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' ')selectScheme('ABA')" onclick="selectScheme('ABA')" id="card-week-ABA" class="week-card bg-surface p-6 rounded border border-border shadow-structural relative overflow-hidden group cursor-pointer">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-primary-bg rounded-bl-full -mr-8 -mt-8 z-0"></div>
                    <div class="relative z-10">
                        <div class="font-heading font-bold text-ink mb-2 border-b border-border pb-2">Semana 1 (A-B-A)</div>
                        <div class="text-[10px] font-mono font-bold text-primary bg-primary-bg px-2 py-1 rounded inline-block mb-3 border border-blue-100 uppercase tracking-wide">Enfoque Sentadilla / Press</div>
                        <ul class="text-xs text-muted space-y-1 font-mono">
                            <li>Lunes: <span class="text-ink font-bold">Sesi√≥n A</span></li>
                            <li>Mi√©rcoles: <span class="text-ink font-bold">Sesi√≥n B</span></li>
                            <li>Viernes: <span class="text-ink font-bold">Sesi√≥n A</span></li>
                        </ul>
                    </div>
                </div>
                <div role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' ')selectScheme('BAB')" onclick="selectScheme('BAB')" id="card-week-BAB" class="week-card bg-surface p-6 rounded border border-border shadow-structural relative overflow-hidden group cursor-pointer">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-warning-bg rounded-bl-full -mr-8 -mt-8 z-0"></div>
                    <div class="relative z-10">
                        <div class="font-heading font-bold text-ink mb-2 border-b border-border pb-2">Semana 2 (B-A-B)</div>
                        <div class="text-[10px] font-mono font-bold text-warning bg-warning-bg px-2 py-1 rounded inline-block mb-3 border border-amber-200 uppercase tracking-wide">Enfoque Banca / P. Muerto</div>
                        <ul class="text-xs text-muted space-y-1 font-mono">
                            <li>Lunes: <span class="text-ink font-bold">Sesi√≥n B</span></li>
                            <li>Mi√©rcoles: <span class="text-ink font-bold">Sesi√≥n A</span></li>
                            <li>Viernes: <span class="text-ink font-bold">Sesi√≥n B</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- PASO 2: Config -->
        <section id="configSection" class="mb-12">
            <div class="bg-surface rounded shadow-structural border border-border overflow-hidden p-6 md:p-8">
                <div class="flex items-center gap-2 mb-6 border-b border-border pb-4">
                    <span class="bg-ink text-surface text-xs font-mono font-bold px-2 py-1 rounded">PASO 2</span>
                    <h3 class="font-heading font-bold text-ink">Configura tus 5RM Actuales</h3>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-6">
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Squat (5RM)</label>
                        <input type="number" id="manualSquat" value="100" class="w-full p-3 border border-border bg-canvas rounded font-mono font-bold focus:border-primary outline-none text-ink">
                    </div>
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Bench (5RM)</label>
                        <input type="number" id="manualBench" value="80" class="w-full p-3 border border-border bg-canvas rounded font-mono font-bold focus:border-primary outline-none text-ink">
                    </div>
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Deadlift (5RM)</label>
                        <input type="number" id="manualDeadlift" value="120" class="w-full p-3 border border-border bg-canvas rounded font-mono font-bold focus:border-primary outline-none text-ink">
                    </div>
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Press (5RM)</label>
                        <input type="number" id="manualPress" value="50" class="w-full p-3 border border-border bg-canvas rounded font-mono font-bold focus:border-primary outline-none text-ink">
                    </div>
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">P. Clean (3RM)</label>
                        <input type="number" id="manualClean" value="60" class="w-full p-3 border border-border bg-canvas rounded font-mono font-bold focus:border-primary outline-none text-ink">
                    </div>
                </div>
            </div>
        </section>

        <!-- DASHBOARD -->
        <section id="dashboard" class="transition-all duration-500">
            <div id="pdfPrintableArea" class="bg-surface p-8 rounded border border-border shadow-structural mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 border-b border-border pb-6 gap-4">
                    <div>
                        <h2 class="font-heading text-2xl font-bold text-ink">Hoja de Ruta: Starting Strength</h2>
                        <div class="flex items-center gap-3 mt-1">
                            <span class="px-2 py-0.5 rounded text-[10px] font-mono font-bold uppercase bg-canvas border border-border text-ink" id="reportWeekBadge">Semana ABA</span>
                            <p class="text-xs text-muted font-mono">Mark Rippetoe ¬∑ 2005</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-1">Incremento por sesi√≥n</div>
                        <div class="text-sm font-mono text-ink font-bold">+2.5kg Tren Inf ¬∑ +1.25kg Tren Sup</div>
                    </div>
                </div>
                <div class="grid lg:grid-cols-3 gap-8 mb-8">
                    <div class="lg:col-span-1">
                        <h3 class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-4">Sesiones de la Semana</h3>
                        <div id="exercisesList" class="space-y-4"></div>
                    </div>
                    <div class="lg:col-span-1 flex flex-col">
                        <h3 class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-2 text-center">Perfil de Estr√©s</h3>
                        <div class="flex-grow bg-canvas rounded p-2 border border-border flex items-center justify-center">
                            <div class="h-56 w-full"><canvas id="radarChart"></canvas></div>
                        </div>
                        <p class="text-[10px] font-mono text-muted text-center mt-2 uppercase">Alta fuerza ¬∑ Alto estr√©s neurol√≥gico</p>
                    </div>
                    <div class="lg:col-span-1 flex flex-col">
                        <h3 class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-2 text-center">Proyecci√≥n Lineal (1 Mes)</h3>
                        <div class="flex-grow bg-canvas rounded p-2 border border-border flex items-center justify-center">
                            <div class="h-56 w-full"><canvas id="linearChart"></canvas></div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 pt-8 border-t border-border">
                    <h3 class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-4">Estructura de Sesi√≥n (Carga vs Fatiga Acumulada)</h3>
                    <div class="h-64 w-full"><canvas id="comboChart"></canvas></div>
                </div>
            </div>

            <!-- ‚îÄ‚îÄ VARIABLE A VALIDAR ‚îÄ‚îÄ -->
            <div id="vcvBlock" class="mb-6 bg-primary-bg border border-blue-200 rounded p-5">
                <div class="flex items-start gap-3">
                    <span class="text-xl mt-0.5">üéØ</span>
                    <div>
                        <div class="text-[10px] font-mono font-bold text-primary uppercase tracking-widest mb-1">Variable a validar esta semana</div>
                        <p id="vcvQuestion" class="text-sm text-ink font-medium leading-relaxed"></p>
                    </div>
                </div>
            </div>

            <!-- ‚îÄ‚îÄ SE√ëALES DE RUPTURA ‚îÄ‚îÄ -->
            <div class="mb-8 bg-surface border border-border rounded shadow-structural overflow-hidden">
                <div class="px-6 py-4 border-b border-border flex items-center gap-2">
                    <span class="text-base">‚ö†Ô∏è</span>
                    <span class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest">Se√±ales de ruptura del sistema</span>
                </div>
                <div class="divide-y divide-border">
                    <div class="px-6 py-4 flex items-start gap-4">
                        <span class="text-error font-mono font-bold text-sm mt-0.5 shrink-0">01</span>
                        <div>
                            <p class="text-sm text-ink font-medium mb-0.5">La barra no sube dos sesiones seguidas con el mismo movimiento</p>
                            <p class="text-xs text-muted font-mono">‚Üí El novicio ya no es novicio. La progresi√≥n lineal sesi√≥n a sesi√≥n agot√≥ su margen. El sistema requiere cambio de enfoque.</p>
                        </div>
                    </div>
                    <div class="px-6 py-4 flex items-start gap-4">
                        <span class="text-error font-mono font-bold text-sm mt-0.5 shrink-0">02</span>
                        <div>
                            <p class="text-sm text-ink font-medium mb-0.5">El atleta falla t√©cnicamente antes de llegar al l√≠mite metab√≥lico</p>
                            <p class="text-xs text-muted font-mono">‚Üí La variable cr√≠tica no es la carga: es la t√©cnica. Subir peso sin resolver esto es acumular deuda que se paga cara.</p>
                        </div>
                    </div>
                    <div class="px-6 py-4 flex items-start gap-4">
                        <span class="text-error font-mono font-bold text-sm mt-0.5 shrink-0">03</span>
                        <div>
                            <p class="text-sm text-ink font-medium mb-0.5">Se saltan sesiones recurrentemente y la progresi√≥n se intenta mantener igual</p>
                            <p class="text-xs text-muted font-mono">‚Üí La frecuencia es lo que hace funcionar este sistema. Sin tres sesiones semanales, el argumento de Starting Strength colapsa.</p>
                        </div>
                    </div>
                </div>
                <div class="px-6 py-4 bg-canvas border-t border-border flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
                    <p class="text-xs text-muted font-mono">¬øEst√°s viendo alguna de estas se√±ales en tu atleta?</p>
                    <button onclick="openLeadModal()" class="text-xs font-mono font-bold text-primary hover:underline shrink-0">Auditor√≠a VCV ‚Üí</button>
                </div>
            </div>

            <!-- ‚îÄ‚îÄ BOTONES DE ACCI√ìN ‚îÄ‚îÄ -->
            <div class="flex flex-col sm:flex-row gap-3 justify-center mb-16">
                <button onclick="openLeadModal()" class="bg-primary hover:bg-primary-600 text-white px-8 py-3 rounded font-medium transition-colors">
                    Revisar mi sistema ‚Üí
                </button>
                <button onclick="openExcelModal()" class="border border-border hover:border-primary text-ink px-8 py-3 rounded font-medium transition-colors flex items-center justify-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    Excel (.xlsx)
                </button>
                <button onclick="openPdfModal()" class="border border-border hover:border-primary text-ink px-8 py-3 rounded font-medium transition-colors flex items-center justify-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    PDF
                </button>
            </div>
        </section>

        <!-- ‚îÄ‚îÄ CICLO COMPLETO ‚îÄ‚îÄ -->
        <section class="mt-4">
            <div class="flex items-center gap-3 mb-6">
                <div class="h-px flex-1 bg-border"></div>
                <span class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest px-2">// Progresi√≥n Proyectada ‚Äî 4 Semanas</span>
                <div class="h-px flex-1 bg-border"></div>
            </div>

            <div class="bg-surface rounded border border-border shadow-structural overflow-hidden mb-4">
                <div class="p-4 border-b border-border bg-canvas flex items-center justify-between flex-wrap gap-2">
                    <p class="text-xs text-muted font-mono">Proyecci√≥n lineal con incrementos est√°ndar. La semana actual est√° resaltada.</p>
                    <span class="text-[10px] font-mono text-subtle">SQ/DL: +2.5kg/ses ¬∑ BP/Press: +1.25kg/ses</span>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-xs font-mono">
                        <thead>
                            <tr class="bg-ink text-surface">
                                <th class="text-left px-4 py-3 font-bold uppercase tracking-wide border-r border-slate-700">Ejercicio</th>
                                <th class="px-4 py-3 font-bold uppercase tracking-wide text-center">Semana 1</th>
                                <th class="px-4 py-3 font-bold uppercase tracking-wide text-center">Semana 2</th>
                                <th class="px-4 py-3 font-bold uppercase tracking-wide text-center">Semana 3</th>
                                <th class="px-4 py-3 font-bold uppercase tracking-wide text-center">Semana 4</th>
                            </tr>
                        </thead>
                        <tbody id="cycleTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Contexto del sistema -->
            <div class="bg-canvas border border-border rounded p-5">
                <div class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-3">// Cu√°ndo el sistema deja de funcionar</div>
                <div class="grid md:grid-cols-3 gap-4 text-xs">
                    <div class="p-3 bg-error-bg border border-red-100 rounded">
                        <div class="font-bold text-error font-mono mb-1">SE√ëAL DE ESTANCAMIENTO</div>
                        <div class="text-muted">No logr√°s completar las 3√ó5 en la sentadilla dos sesiones consecutivas con el peso prescripto.</div>
                    </div>
                    <div class="p-3 bg-warning-bg border border-amber-100 rounded">
                        <div class="font-bold text-warning font-mono mb-1">ACCI√ìN RECOMENDADA</div>
                        <div class="text-muted">Reset al 90% del peso actual y reinici√° la progresi√≥n. Solo se hace una vez antes de migrar a un programa intermedio.</div>
                    </div>
                    <div class="p-3 bg-success-bg border border-green-100 rounded">
                        <div class="font-bold text-success font-mono mb-1">INDICADOR DE EGRESO</div>
                        <div class="text-muted">Cuando el reset ya no produce nuevas PBs, la Variable Cr√≠tica cambi√≥. El sistema cumpli√≥ su prop√≥sito.</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- MODAL EXCEL -->
    <div id="excelModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-dark/80 p-4 backdrop-blur-sm">
        <div class="bg-surface w-full max-w-md rounded shadow-structural border border-border overflow-hidden relative">
            <button onclick="closeExcelModal()" class="absolute top-4 right-4 text-muted hover:text-ink">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="p-8">
                <div class="text-center mb-6">
                    <div class="w-12 h-12 bg-success-bg border border-green-200 rounded flex items-center justify-center mx-auto mb-4 text-2xl">üìä</div>
                    <h3 class="font-heading text-lg font-bold text-ink mb-1">Tu planilla de SS est√° lista</h3>
                    <p class="text-xs text-muted">3 hojas: sesiones de la semana ¬∑ progresi√≥n 4 semanas ¬∑ log editable para registrar resultados.</p>
                </div>
                <form id="excelForm" class="space-y-3">
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Tu email</label>
                        <input type="email" id="excelEmail" name="email" required placeholder="tu@email.com" class="w-full px-4 py-3 rounded bg-canvas border border-border focus:border-primary outline-none transition-all text-sm">
                    </div>
                    <div>
                        <label class="block text-[10px] font-mono font-bold text-muted uppercase mb-2">Rol</label>
                        <div class="relative">
                            <select id="excelRol" name="rol" class="w-full px-4 py-3 rounded bg-canvas border border-border focus:border-primary outline-none text-sm appearance-none cursor-pointer">
                                <option value="preparador">Preparador f√≠sico</option>
                                <option value="entrenador">Entrenador personal</option>
                                <option value="atleta">Atleta / autoentrenado</option>
                                <option value="otro">Otro</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-muted">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                        </div>
                    </div>
                    <input type="text" name="_honey" style="display:none">
                    <button type="submit" id="excelSubmitBtn" class="w-full bg-success hover:opacity-90 text-white font-medium py-3 rounded transition-all text-sm mt-2">Descargar Excel ‚Üí</button>
                </form>
                <p class="text-[10px] font-mono text-muted text-center mt-4 uppercase">Sin spam. El email se usa para seguimiento opcional.</p>
            </div>
        </div>
    </div>

    <!-- MODAL PDF -->
    <div id="pdfModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-dark/80 p-4 backdrop-blur-sm">
        <div class="bg-surface w-full max-w-md rounded shadow-structural border border-border overflow-hidden relative">
            <button onclick="closePdfModal()" class="absolute top-4 right-4 text-muted hover:text-ink">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="p-8 text-center">
                <h3 class="font-heading text-xl font-bold text-ink mb-2">Plan Listo</h3>
                <p class="text-sm text-body mb-6">Tu hoja de ruta para la progresi√≥n lineal est√° lista.</p>
                <button id="downloadBtn" onclick="downloadPdfAction()" class="w-full bg-primary hover:bg-primary-600 text-white font-medium py-3 rounded transition-colors">Descargar Ahora</button>
            </div>
        </div>
    </div>

    <!-- MODAL LEAD -->
    <div id="leadModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-dark/80 p-4 backdrop-blur-sm">
        <div class="bg-surface w-full max-w-md rounded shadow-structural border border-border overflow-hidden relative">
            <button onclick="closeLeadModal()" class="absolute top-4 right-4 text-muted hover:text-ink">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="p-8">
                <div class="text-center mb-6">
                    <div class="w-12 h-12 bg-canvas border border-border rounded flex items-center justify-center mx-auto mb-4 text-2xl">üöÇ</div>
                    <h3 class="font-heading text-lg font-bold text-ink mb-2">El simulador te da los n√∫meros. El criterio para usarlos bien es otra conversaci√≥n.</h3>
                    <p class="text-xs text-body">Auditor√≠a VCV: revisi√≥n de 10 a 14 d√≠as de tu sistema de decisi√≥n actual.</p>
                </div>
                <div class="space-y-3 mb-5">
                    <button type="button" onclick="window.location.href='../contacto.html'" class="w-full bg-primary hover:bg-primary-600 text-white font-medium py-3 rounded transition-colors text-sm">Revisar mi sistema ‚Üí</button>
                    <button type="button" onclick="document.getElementById('leadFormWrapper').classList.toggle('hidden')" class="w-full border border-border hover:border-primary text-ink font-medium py-3 rounded transition-colors text-sm">Hacerme una consulta puntual</button>
                </div>
                <div id="leadFormWrapper" class="hidden">
                    <form action="https://formspree.io/f/mnjbvkey" method="POST" class="space-y-4">
                        <input type="email" name="email" required placeholder="tu@email.com" class="w-full px-4 py-3 rounded bg-canvas border border-border focus:border-primary outline-none transition-all text-sm">
                        <input type="text" name="context" placeholder="Contame tu contexto" class="w-full px-4 py-3 rounded bg-canvas border border-border focus:border-primary outline-none transition-all text-sm">
                        <input type="hidden" name="source" value="ss_simulator">
                        <button type="submit" class="w-full bg-primary hover:bg-primary-600 text-white font-medium py-3 rounded transition-colors text-sm">Enviar ‚Üí</button>
                    </form>
                </div>
                <p class="text-[10px] font-mono text-muted text-center mt-4 uppercase">Sin spam. Respuesta en menos de 48hs.</p>
            </div>
            <div class="bg-canvas px-8 py-3 border-t border-border text-center">
                <a href="demo.html" class="text-xs text-muted font-mono hover:text-ink">_Volver a la librer√≠a</a>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ AUDITOR√çA VCV CALLOUT ‚îÄ‚îÄ -->
    <div class="bg-ink border-t-4 border-primary">
        <div class="max-w-5xl mx-auto px-6 py-12 flex flex-col md:flex-row items-start md:items-center justify-between gap-8">
            <div class="max-w-xl">
                <div class="text-[10px] font-mono font-bold text-primary uppercase tracking-widest mb-3">// Auditor√≠a VCV</div>
                <h3 class="font-heading text-xl font-bold text-surface mb-3">¬øEl simulador te genera m√°s preguntas que respuestas?</h3>
                <p class="text-sm text-muted leading-relaxed">La Auditor√≠a VCV es una revisi√≥n de 10 a 14 d√≠as de tu sistema de decisi√≥n actual. Identific√°s la variable que realmente gobierna tus ajustes de carga ‚Äî y sal√≠s con un esquema claro de validaci√≥n semanal.</p>
            </div>
            <a href="../contacto.html" class="shrink-0 bg-primary hover:bg-primary-600 text-white px-8 py-3 rounded font-medium transition-colors text-sm whitespace-nowrap">Ver c√≥mo funciona ‚Üí</a>
        </div>
    </div>

    <footer class="bg-dark pt-16 pb-8 border-t-4 border-primary">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                <div class="md:col-span-2">
                    <span class="font-heading font-semibold text-lg text-surface block mb-4">Lisandro Cacciatore <span class="text-primary font-mono font-bold">_</span></span>
                    <p class="text-muted text-sm leading-relaxed max-w-sm">Sistemas de validaci√≥n semanal para preparadores f√≠sicos. Criterio claro, decisiones con fundamento.</p>
                </div>
                <div>
                    <h3 class="font-heading text-surface text-xs font-bold mb-4 uppercase tracking-widest">Ecosistema</h3>
                    <ul class="space-y-3">
                        <li><a href="../blog.html" class="text-sm text-muted hover:text-surface transition-colors">Blog T√©cnico</a></li>
                        <li><a href="index.html" class="text-sm text-muted hover:text-surface transition-colors">IronLog (Piloto)</a></li>
                        <li><a href="tools.html" class="text-sm text-muted hover:text-surface transition-colors">Data Tools</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-heading text-surface text-xs font-bold mb-4 uppercase tracking-widest">Operaciones</h3>
                    <ul class="space-y-3">
                        <li><a href="../contacto.html" class="text-sm text-muted hover:text-surface transition-colors">Revisar mi sistema ‚Üí</a></li>
                        <li><span class="text-sm text-subtle block">Rosario, Argentina</span></li>
                        <li><span class="text-sm text-subtle block">Remoto LATAM / Espa√±a</span></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-xs font-mono text-subtle">¬© 2026 Lisandro Cacciatore. Todos los derechos reservados.</div>
                <div class="flex gap-6 text-xs text-subtle">
                    <a href="../privacidad.html" class="hover:text-muted transition-colors">Privacidad</a>
                    <a href="../sobre-mi.html" class="hover:text-muted transition-colors">Sobre m√≠</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ‚îÄ‚îÄ ESTADO GLOBAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        let currentScheme = 'ABA';
        let radarChart = null, linearChart = null, comboChart = null;

        const vcvQuestions = {
            ABA: '¬øEl peso de la barra subi√≥ respecto a la √∫ltima Sesi√≥n A? Si no, identific√° si el problema es recuperaci√≥n, t√©cnica o nutrici√≥n ‚Äî en ese orden ‚Äî antes de ajustar la carga.',
            BAB: '¬øEl peso de la barra subi√≥ respecto a la √∫ltima Sesi√≥n B? Si la banca o el Power Clean frenaron, revis√° la sesi√≥n previa: la Sentadilla de la Sesi√≥n A puede estar acumulando m√°s fatiga de la que parece.'
        };

        function updateVCV() {
            const el = document.getElementById('vcvQuestion');
            if (el) el.textContent = vcvQuestions[currentScheme] || '';
        }

        // ‚îÄ‚îÄ DATOS DE SESIONES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // Sesi√≥n A: Squat, Press, Deadlift
        // Sesi√≥n B: Squat, Bench, Power Clean
        function buildSessions(sq, bp, dl, press, pc) {
            const sessA = [
                { name:'Sentadilla',   w:sq,    sets:'3√ó5', incr:2.5  },
                { name:'Press Militar',w:press,  sets:'3√ó5', incr:1.25 },
                { name:'Peso Muerto',  w:dl,    sets:'1√ó5', incr:2.5  },
            ];
            const sessB = [
                { name:'Sentadilla',   w:sq,    sets:'3√ó5', incr:2.5  },
                { name:'Press Banca',  w:bp,    sets:'3√ó5', incr:1.25 },
                { name:'Power Clean',  w:pc,    sets:'5√ó3', incr:2.5  },
            ];
            if (currentScheme === 'ABA') {
                return [
                    { day:'Lunes (A)',     lifts: sessA },
                    { day:'Mi√©rcoles (B)', lifts: sessB },
                    { day:'Viernes (A)',   lifts: sessA },
                ];
            } else {
                return [
                    { day:'Lunes (B)',     lifts: sessB },
                    { day:'Mi√©rcoles (A)', lifts: sessA },
                    { day:'Viernes (B)',   lifts: sessB },
                ];
            }
        }

        // ‚îÄ‚îÄ INICIALIZACI√ìN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        document.addEventListener('DOMContentLoaded', () => {
            // Todos los modales se inicializan aqu√≠ ‚Äî no hay referencias fuera del DOMContentLoaded
            document.getElementById('leadModal').addEventListener('click',  e => { if(e.target===document.getElementById('leadModal'))  closeLeadModal();  });
            document.getElementById('excelModal').addEventListener('click', e => { if(e.target===document.getElementById('excelModal')) closeExcelModal(); });
            document.getElementById('excelForm').addEventListener('submit', handleExcelSubmit);

            ['manualSquat','manualBench','manualDeadlift','manualPress','manualClean'].forEach(id =>
                document.getElementById(id).addEventListener('input', generateSSDashboard)
            );
            selectScheme('ABA');
        });

        function selectScheme(scheme) {
            currentScheme = scheme;
            document.querySelectorAll('.week-card').forEach(el => {
                el.classList.remove('week-active');
                el.classList.add('opacity-60');
            });
            document.getElementById(`card-week-${scheme}`).classList.add('week-active');
            document.getElementById(`card-week-${scheme}`).classList.remove('opacity-60');
            generateSSDashboard();
            updateVCV();
        }

        function getInputs() {
            return {
                sq:    parseFloat(document.getElementById('manualSquat').value)    || 0,
                bp:    parseFloat(document.getElementById('manualBench').value)     || 0,
                dl:    parseFloat(document.getElementById('manualDeadlift').value)  || 0,
                press: parseFloat(document.getElementById('manualPress').value)     || 0,
                pc:    parseFloat(document.getElementById('manualClean').value)     || 0,
            };
        }

        function generateSSDashboard() {
            const { sq, bp, dl, press, pc } = getInputs();

            document.getElementById('reportWeekBadge').innerText = `Esquema ${currentScheme}`;

            // Construir las sesiones de la semana (variable definida dentro de esta funci√≥n)
            const sessions = buildSessions(sq, bp, dl, press, pc);

            // Renderizar lista de sesiones
            let listHTML = '';
            sessions.forEach(sess => {
                listHTML += `<div class="bg-canvas p-3 rounded border border-border mb-3">
                    <div class="text-[10px] font-mono font-bold text-muted uppercase tracking-widest mb-2 border-b border-border pb-1">${sess.day}</div>
                    <div class="space-y-1">`;
                sess.lifts.forEach(lift => {
                    listHTML += `<div class="flex justify-between text-sm">
                        <span class="font-bold text-ink">${lift.name}</span>
                        <span class="font-mono font-bold text-ink">${lift.w}<span class="text-muted text-[10px]">kg</span>
                        <span class="text-muted font-normal text-[10px] ml-1">${lift.sets}</span></span>
                    </div>`;
                });
                listHTML += `</div></div>`;
            });
            document.getElementById('exercisesList').innerHTML = listHTML;
            document.getElementById('dashboard').classList.remove('hidden');

            // Renderizar charts ‚Äî sessions se pasa expl√≠citamente
            renderCharts(sq, bp, dl, press, sessions);
            renderCycleTable(sq, bp, dl, press, pc);
        }

        // ‚îÄ‚îÄ CHARTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // FIX: sessions se recibe como par√°metro, no se referencia del scope exterior
        function renderCharts(sq, bp, dl, press, sessions) {
            Chart.defaults.font.family = "'Fira Code', monospace";
            Chart.defaults.color = '#64748B';

            // 1. Radar ‚Äî fijo para SS
            if (radarChart) radarChart.destroy();
            radarChart = new Chart(document.getElementById('radarChart'), {
                type: 'radar',
                data: {
                    labels: ['Fuerza','Hipertrofia','Potencia','T√©cnica','SNC Stress'],
                    datasets: [{ data:[9,4,7,8,8], backgroundColor:'rgba(30,58,138,0.1)',
                        borderColor:'#1E3A8A', pointBackgroundColor:'#1E3A8A' }]
                },
                options:{ responsive:true, maintainAspectRatio:false,
                    scales:{r:{ticks:{display:false},min:0,max:10}}, plugins:{legend:{display:false}} }
            });

            // 2. Proyecci√≥n lineal ‚Äî 4 semanas
            // +2.5kg √ó 3 ses/sem para squat, +5kg/sem para deadlift (1 ses/sem)
            const sqProg  = [sq,  sq+7.5,  sq+15,  sq+22.5];
            const dlProg  = [dl,  dl+5,    dl+10,  dl+15  ];
            const bpProg  = [bp,  bp+3.75, bp+7.5, bp+11.25];

            if (linearChart) linearChart.destroy();
            linearChart = new Chart(document.getElementById('linearChart'), {
                type: 'line',
                data: {
                    labels: ['Inicio','Sem 2','Sem 3','Sem 4'],
                    datasets: [
                        { label:'Squat',    data:sqProg, borderColor:'#B91C1C', tension:0.1, pointRadius:3 },
                        { label:'Deadlift', data:dlProg, borderColor:'#15803D', tension:0.1, pointRadius:3 },
                        { label:'Banca',    data:bpProg, borderColor:'#1E3A8A', tension:0.1, pointRadius:3 },
                    ]
                },
                options:{ responsive:true, maintainAspectRatio:false,
                    plugins:{ legend:{position:'bottom',labels:{boxWidth:10}} },
                    scales:{ y:{ display:false } } }
            });

            // 3. Sesiones de la semana ‚Äî usa el par√°metro sessions (no variable externa)
            const sessionLabels = sessions.map(s => s.day.split(' ')[0]);
            const sessionVolume = sessions.map(s => s.lifts.length * 5); // sets aprox

            if (comboChart) comboChart.destroy();
            comboChart = new Chart(document.getElementById('comboChart'), {
                type: 'bar',
                data: {
                    labels: sessionLabels,
                    datasets: [
                        { label:'Sets Totales', data:sessionVolume, backgroundColor:'#E2E8F0', order:2, borderRadius:2 },
                        { label:'Intensidad (% 5RM)', data:[100,100,102], type:'line',
                          borderColor:'#1E293B', borderWidth:2, tension:0, order:1, pointRadius:4 }
                    ]
                },
                options:{ responsive:true, maintainAspectRatio:false,
                    scales:{ y:{display:false} }, plugins:{legend:{position:'bottom'}} }
            });
        }

        // ‚îÄ‚îÄ CICLO: tabla de progresi√≥n 4 semanas ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function renderCycleTable(sq, bp, dl, press, pc) {
            const currentWeekNum = currentScheme === 'ABA' ? 1 : 2;
            const liftDefs = [
                // name, startVal, incrPerSession, sesPerWeek
                { name:'Sentadilla',    val:sq,    incrSes:2.5,  sesPerWk:3 },
                { name:'Press Banca',   val:bp,    incrSes:1.25, sesPerWk:currentScheme==='ABA'?1:2 },
                { name:'Peso Muerto',   val:dl,    incrSes:2.5,  sesPerWk:currentScheme==='ABA'?2:1 },
                { name:'Press Militar', val:press, incrSes:1.25, sesPerWk:currentScheme==='ABA'?2:1 },
                { name:'Power Clean',   val:pc,    incrSes:2.5,  sesPerWk:currentScheme==='ABA'?1:2 },
            ];

            let tbody = '';
            liftDefs.forEach((l,ri) => {
                let row = `<tr class="${ri%2===1?'bg-surface':''} border-t border-border">
                    <td class="px-4 py-3 font-bold text-ink border-r border-border whitespace-nowrap">
                        ${l.name}<br><span class="font-normal text-muted text-[10px]">Inicio: ${l.val}kg</span>
                    </td>`;
                [1,2,3,4].forEach(w => {
                    // Peso al inicio de esa semana
                    const weekVal  = l.val + l.incrSes * l.sesPerWk * (w - 1);
                    const isActive = w === currentWeekNum;
                    row += `<td class="px-4 py-3 text-center border-l border-border ${isActive?'bg-primary-bg':''}">
                        <div class="font-bold ${isActive?'text-primary':'text-body'}">${weekVal}kg</div>
                        <div class="text-[10px] text-muted">3√ó5</div>
                    </td>`;
                });
                row += '</tr>';
                tbody += row;
            });
            document.getElementById('cycleTableBody').innerHTML = tbody;
        }

        // ‚îÄ‚îÄ EXCEL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function openExcelModal()  { document.getElementById('excelModal').classList.remove('hidden'); }
        function closeExcelModal() { document.getElementById('excelModal').classList.add('hidden'); }

        async function handleExcelSubmit(e) {
            e.preventDefault();
            const btn = document.getElementById('excelSubmitBtn');
            btn.textContent = 'Generando...'; btn.disabled = true;
            try {
                await fetch('https://formspree.io/f/mnjbvkey', {
                    method:'POST', headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({
                        email: document.getElementById('excelEmail').value,
                        rol:   document.getElementById('excelRol').value,
                        source:'ss_excel', simulador:'Starting Strength', esquema: currentScheme
                    })
                });
            } catch(_) {}
            generateExcel();
            closeExcelModal();
            btn.textContent = 'Descargar Excel ‚Üí'; btn.disabled = false;
        }

        function generateExcel() {
            const { sq, bp, dl, press, pc } = getInputs();
            const sessions = buildSessions(sq, bp, dl, press, pc);
            const wb = XLSX.utils.book_new();

            // Sheet 1: Sesiones de la semana
            const s1 = [
                ['STARTING STRENGTH ‚Äî IronLog | lisandrocacciatore.com','','',''],
                [`Esquema: ${currentScheme} | Mark Rippetoe (2005)`,'','',''],
                [`Incrementos: +2.5kg Squat/DL por sesi√≥n ¬∑ +1.25kg Banca/Press por sesi√≥n`,'','',''],
                [],
                ['D√≠a','Ejercicio','Sets √ó Reps','Peso (kg)','Pr√≥xima Sesi√≥n'],
            ];
            sessions.forEach(sess => {
                sess.lifts.forEach((lift,i) => {
                    s1.push([i===0?sess.day:'', lift.name, lift.sets, lift.w, lift.w+lift.incr]);
                });
                s1.push(['','','','','']);
            });
            const ws1 = XLSX.utils.aoa_to_sheet(s1);
            ws1['!cols'] = [{wch:18},{wch:18},{wch:12},{wch:12},{wch:16}];
            XLSX.utils.book_append_sheet(wb, ws1, 'Esta Semana');

            // Sheet 2: Progresi√≥n 4 semanas
            const liftDefs = [
                { name:'Sentadilla',    val:sq,    incrSes:2.5,  sesPerWk:3 },
                { name:'Press Banca',   val:bp,    incrSes:1.25, sesPerWk:currentScheme==='ABA'?1:2 },
                { name:'Peso Muerto',   val:dl,    incrSes:2.5,  sesPerWk:currentScheme==='ABA'?2:1 },
                { name:'Press Militar', val:press, incrSes:1.25, sesPerWk:currentScheme==='ABA'?2:1 },
                { name:'Power Clean',   val:pc,    incrSes:2.5,  sesPerWk:currentScheme==='ABA'?1:2 },
            ];
            const s2 = [
                ['PROGRESI√ìN PROYECTADA ‚Äî 4 SEMANAS'],
                ['Ejercicio','Sem 1','Sem 2','Sem 3','Sem 4','Ganancia total'],
            ];
            liftDefs.forEach(l => {
                const vals = [1,2,3,4].map(w => l.val + l.incrSes * l.sesPerWk * (w-1));
                s2.push([l.name,...vals.map(v=>`${v}kg`),`+${l.incrSes*l.sesPerWk*3}kg`]);
            });
            const ws2 = XLSX.utils.aoa_to_sheet(s2);
            ws2['!cols'] = [{wch:18},...Array(5).fill({wch:14})];
            XLSX.utils.book_append_sheet(wb, ws2, 'Progresi√≥n 4 Semanas');

            // Sheet 3: Log de sesiones editable
            const s3 = [
                ['LOG DE SESIONES ‚Äî STARTING STRENGTH'],
                ['Completar despu√©s de cada entrenamiento'],
                [],
                ['Fecha','Sesi√≥n','Ejercicio','Peso (kg)','Reps (sets)','¬øCompletaste?','Notas'],
            ];
            for (let i=0; i<12; i++) {
                s3.push(['','A o B','','','','S√≠ / No / Ajust√©','']);
            }
            const ws3 = XLSX.utils.aoa_to_sheet(s3);
            ws3['!cols'] = [{wch:12},{wch:10},{wch:18},{wch:12},{wch:14},{wch:16},{wch:30}];
            XLSX.utils.book_append_sheet(wb, ws3, 'Log Sesiones');

            XLSX.writeFile(wb, `IronLog_SS_${currentScheme}.xlsx`);
        }

        // ‚îÄ‚îÄ PDF ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function openPdfModal()  { document.getElementById('pdfModal').classList.remove('hidden'); }
        function closePdfModal() { document.getElementById('pdfModal').classList.add('hidden'); }
        function downloadPdfAction() {
            html2pdf().set({ margin:5, filename:`IronLog_SS_${currentScheme}.pdf`,
                image:{type:'jpeg',quality:0.98}, html2canvas:{scale:2},
                jsPDF:{unit:'mm',format:'a4',orientation:'portrait'} })
            .from(document.getElementById('pdfPrintableArea')).save();
            closePdfModal();
        }

        // ‚îÄ‚îÄ LEAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function openLeadModal()  { document.getElementById('leadModal').classList.remove('hidden'); }
        function closeLeadModal() { document.getElementById('leadModal').classList.add('hidden'); }
    </script>
</body>
</html>